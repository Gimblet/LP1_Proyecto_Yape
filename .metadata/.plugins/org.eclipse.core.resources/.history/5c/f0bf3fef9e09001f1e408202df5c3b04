<%@page import="gestion.Metodos"%>
<%@ page import="java.util.List"%>
<%@ page import="data.Yapes"%>
<%@ page import="data.Logins"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1"%>
<%
List<Yapes> yapeList = (List<Yapes>) request.getAttribute("ListaYapes");
List<Logins> userList = (List<Logins>) request.getAttribute("ListaUsuarios");
Metodos metodo = new Metodos();
%>
<!DOCTYPE html>
<html>

<head>
<meta charset="ISO-8859-1">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<title>Admin Dashboard</title>

<style>
body {
	background-color: purple;
}

main {
	background-color: white;
	margin: auto;
	margin-top: 80px;
}

.buscarContainer {
	display: flex;
	gap: 12px;
}

form {
	display: flex;
	gap: 20px;
}

#buscar {
	margin-left: auto;
}

input:hover {
	cursor: pointer;
}

section {
	padding: 45px 70px 70px 70px;
}
</style>
</head>

<body>
	<div class="container">
		<main class="border rounded">
			<section>
				<h1>
					Hola,
					<%=metodo.obtenerNombre()%></h1>
				<br>
				<div>
					<form action="Servlet" method="post">
						<input class="btn btn-primary" type="submit" value="Mostrar Yapes"
							name="type"> <input type="submit" class="btn btn-primary"
							value="Mostrar Usuarios" name="type">
						<div class="buscarContainer">
							<input class="btn btn-primary" type="submit" value="Buscar Yape"
								name="type"> <input class="form form-control"
								type="text" name="txtBuscar"
								<%String IDStatus = "Ingresa el ID del Yape";
if (request.getAttribute("IDInvalido") != null) {
	IDStatus = (String) request.getAttribute("IDInvalido");
}%>
								placeholder="<%=IDStatus%>">
						</div>
						<input class="btn btn-primary" id="buscar" type="submit"
							value="Cerrar Sesion" name="type">
					</form>
					<br>
				</div>

				<!-- Tabla de Yapes -->

				<%
				if (yapeList != null) {
				%>
				<table class="table table-hover table-striped border rounded">
					<thead class="table-primary">
						<tr>
							<th>IdYape</th>
							<th>Numero que lo realiza</th>
							<th>Numero que lo recibe</th>
							<th>Monto</th>
							<th>Fecha</th>
							<th>Hora</th>
							<th>Estado</th>
							<th>Acciones</th>
						</tr>
					</thead>
					<tbody>
						<%
						for (Yapes item : yapeList) {
						%>
						<tr>
							<td id="idYapeLista"><%=item.getIdYape()%></td>
							<td><%=item.getNumeroRealizante()%></td>
							<td><%=item.getNumeroRecibiente()%></td>
							<td><%=item.getMonto()%></td>
							<td><%=item.getFecha()%></td>
							<td><%=item.getHora()%></td>
							<td><%=item.getEstado()%></td>
							<td><a
								href="Servlet?type=Buscar Yape&id=<%=item.getIdYape()%>">Mas
									info</a> <a
								href="Servlet?type=Buscar Yape a Editar&id=<%=item.getIdYape()%>"><svg
										xmlns="http://www.w3.org/2000/svg" width="16" height="16"
										fill="currentColor" class="bi bi-pen-fill" viewBox="0 0 16 16">
  <path
											d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001" />
</svg></a> <a
								href="Servlet?type=Eliminar Yape&id=<%=item.getIdYape()%>&numeroRec=<%=item.getNumeroRecibiente()%>&numeroRem=<%=item.getNumeroRealizante()%>&monto=<%=item.getMonto()%>"><svg
										xmlns="http://www.w3.org/2000/svg" width="16" height="16"
										fill="currentColor" class="bi bi-x-square" viewBox="0 0 16 16">
  <path
											d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z" />
  <path
											d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708" />
</svg></a></td>
						</tr>
						<%
						}
						%>
					</tbody>
				</table>
				<%
				}
				%>

				<!-- Tabla de Usuarios -->

				<%
				if (userList != null) {
				%>
				<table class="table table-hover table-striped border rounded">
					<thead class="table-primary">
						<tr>
							<th>IdUsuario</th>
							<th>Tipo de Usuario</th>
							<th>Nombres Y Apellidos</th>
							<th>Saldo</th>
							<th>Numero</th>
							<th>Clave</th>
						</tr>
					</thead>
					<tbody>
						<%
						for (Logins item : userList) {
						%>
						<tr>
							<td id="idYapeLista"><%=item.getIdUsuario()%></td>
							<td><%=item.getTipoUsuario()%></td>
							<td><%=item.getNombreApellidos()%></td>
							<td><%=item.getSaldo()%></td>
							<td><%=item.getNumero()%></td>
							<td><%=item.getClave()%></td>
						</tr>
						<%
						}
						%>
					</tbody>
				</table>
				<%
				}
				%>
			</section>
		</main>
	</div>
</body>

</html>