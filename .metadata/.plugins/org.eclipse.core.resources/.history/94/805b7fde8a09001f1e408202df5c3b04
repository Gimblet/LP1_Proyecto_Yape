<%@page import="gestion.Metodos"%>
<%@ page import="java.util.List"%>
<%@ page import="data.Yapes"%>
<%@ page import="data.Logins"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1"%>
<%
List<Yapes> yapeList = (List<Yapes>) request.getAttribute("ListaYapes");
List<Logins> userList = (List<Logins>) request.getAttribute("ListaUsuarios");
Metodos metodo = new Metodos();
%>
<!DOCTYPE html>
<html>

<head>
<meta charset="ISO-8859-1">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<title>Admin Dashboard</title>

<style>
body {
	background-color: purple;
}

main {
	background-color: white;
	margin: auto;
}

.buscarContainer {
	display: flex;
	gap: 12px;
}

form {
	display: flex;
	gap: 20px;
}

#buscar {
	margin-left: auto;
}

input:hover {
	cursor: pointer;
}

section{
	padding: 30px;
}
</style>
</head>

<body>
	<div class="container">
		<main class="border rounded">
			<section>
				<h1>
					Hola,
					<%=metodo.obtenerNombre()%></h1>
				<br>
				<div>
					<form action="Servlet" method="post">
						<input type="submit" value="Mostrar Yapes" name="type"> <input
							type="submit" value="Mostrar Usuarios" name="type">
						<div class="buscarContainer">
							<input type="text" name="txtBuscar"
								<%String IDStatus = "Ingresa el ID del Yape";
if (request.getAttribute("IDInvalido") != null) {
	IDStatus = (String) request.getAttribute("IDInvalido");
}%>
								placeholder="<%=IDStatus%>"> <input type="submit"
								value="Buscar Yape" name="type">
						</div>
						<input id="buscar" type="submit" value="Cerrar Sesion" name="type">
					</form>
					<br>
				</div>

				<!-- Tabla de Yapes -->

				<%
				if (yapeList != null) {
				%>
				<table class="table">
					<thead>
						<tr>
							<th>IdYape</th>
							<th>Numero que lo realiza</th>
							<th>Numero que lo recibe</th>
							<th>Monto</th>
							<th>Fecha</th>
							<th>Hora</th>
							<th>Estado</th>
							<th>Acciones</th>
						</tr>
					</thead>
					<tbody>
						<%
						for (Yapes item : yapeList) {
						%>
						<tr>
							<td id="idYapeLista"><%=item.getIdYape()%></td>
							<td><%=item.getNumeroRealizante()%></td>
							<td><%=item.getNumeroRecibiente()%></td>
							<td><%=item.getMonto()%></td>
							<td><%=item.getFecha()%></td>
							<td><%=item.getHora()%></td>
							<td><%=item.getEstado()%></td>
							<td><a
								href="Servlet?type=Buscar Yape&id=<%=item.getIdYape()%>">Mas
									info</a> <a
								href="Servlet?type=Buscar Yape a Editar&id=<%=item.getIdYape()%>">Editar</a>
								<a
								href="Servlet?type=Eliminar Yape&id=<%=item.getIdYape()%>&numeroRec=<%=item.getNumeroRecibiente()%>&numeroRem=<%=item.getNumeroRealizante()%>&monto=<%=item.getMonto()%>">Eliminar</a>
							</td>
						</tr>
						<%
						}
						%>
					</tbody>
				</table>
				<%
				}
				%>

				<!-- Tabla de Usuarios -->

				<%
				if (userList != null) {
				%>
				<table class="table">
					<thead>
						<tr>
							<th>IdUsuario</th>
							<th>Tipo de Usuario</th>
							<th>Nombres Y Apellidos</th>
							<th>Saldo</th>
							<th>Numero</th>
							<th>Clave</th>
						</tr>
					</thead>
					<tbody>
						<%
						for (Logins item : userList) {
						%>
						<tr>
							<td id="idYapeLista"><%=item.getIdUsuario()%></td>
							<td><%=item.getTipoUsuario()%></td>
							<td><%=item.getNombreApellidos()%></td>
							<td><%=item.getSaldo()%></td>
							<td><%=item.getNumero()%></td>
							<td><%=item.getClave()%></td>
						</tr>
						<%
						}
						%>
					</tbody>
				</table>
				<%
				}
				%>
			</section>
		</main>
	</div>
</body>

</html>